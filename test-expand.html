<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>测试展开功能</title>
  <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
  <style>
    .district-item {
      border: 1px solid #ccc;
      padding: 10px;
      margin: 10px;
      background: #f5f5f5;
    }
    .area-list {
      margin-left: 20px;
      margin-top: 10px;
      background: white;
      padding: 10px;
    }
    button {
      padding: 5px 10px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <div id="app">
    <h1>韩国地区展开测试</h1>
    <div v-for="(district, index) in districts" :key="index" class="district-item">
      <div>
        <strong>{{ district.label }} ({{ district.labelKr }})</strong>
        <span> - {{ district.children ? district.children.length : 0 }} 个地区</span>
        <button @click="toggleExpand(index)">
          {{ expanded[index] ? '收起' : '展开' }}
        </button>
      </div>

      <div v-if="expanded[index]" class="area-list">
        <div v-for="area in district.children" :key="area.value">
          • {{ area.label }} ({{ area.labelKr }})
        </div>
      </div>
    </div>
  </div>

  <script>
    const { createApp } = Vue;

    createApp({
      data() {
        return {
          expanded: {},
          districts: [
            {
              value: 'gangnam-gu',
              label: '江南区',
              labelKr: '강남구',
              children: [
                { value: 'gangnam', label: '江南站', labelKr: '강남역' },
                { value: 'sinsa', label: '新沙洞', labelKr: '신사동' },
                { value: 'apgujeong', label: '狎鸥亭', labelKr: '압구정' }
              ]
            },
            {
              value: 'mapo-gu',
              label: '麻浦区',
              labelKr: '마포구',
              children: [
                { value: 'hongdae', label: '弘大', labelKr: '홍대' },
                { value: 'sinchon', label: '新村', labelKr: '신촌' }
              ]
            }
          ]
        }
      },
      methods: {
        toggleExpand(index) {
          // 使用 $set 确保响应性
          this.expanded[index] = !this.expanded[index];
        }
      }
    }).mount('#app');
  </script>
</body>
</html>